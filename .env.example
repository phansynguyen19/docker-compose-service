# =============================================================================
# Gen3 Docker Compose Environment Configuration
# =============================================================================
# This file contains all environment variables for the Gen3 stack.
# Modify these values according to your deployment environment.
# =============================================================================

# =============================================================================
# GENERAL SETTINGS
# =============================================================================
APP_NAME=Gen3 Data Commons
# Base URL where services are deployed (external access)
BASE_URL=http://localhost
# Internal service hostnames (for container-to-container communication)
FENCE_SERVICE_HOST=fence-service
ARBORIST_SERVICE_HOST=arborist-service
KEYCLOAK_SERVICE_HOST=keycloak

# =============================================================================
# DATABASE SETTINGS
# =============================================================================
POSTGRES_HOST=gen3-postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres

# Database names
FENCE_DB_NAME=fence_db
ARBORIST_DB_NAME=arborist_db
KEYCLOAK_DB_NAME=keycloak_db

# =============================================================================
# FENCE SETTINGS
# =============================================================================
FENCE_PORT=5000
FENCE_CONFIG_PATH=/var/www/fence/fence-config.yaml
FENCE_DEBUG=true
# Encryption key for JWT - generate with: python -c "import base64,os;print(base64.urlsafe_b64encode(os.urandom(32)).decode())"
FENCE_ENCRYPTION_KEY=yAxkRSmlQ6ig_lo_1bddoc9WaiafpZTQITA13-SgbUw=

# =============================================================================
# ARBORIST SETTINGS
# =============================================================================
ARBORIST_PORT=8080

# =============================================================================
# KEYCLOAK SETTINGS
# =============================================================================
# Keycloak exposed port (browser access)
KEYCLOAK_EXTERNAL_PORT=8085
# Keycloak internal port (container-to-container)
KEYCLOAK_INTERNAL_PORT=8080
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_REALM=gen3
KEYCLOAK_CLIENT_ID=fence-client
KEYCLOAK_CLIENT_SECRET=fence-client-secret

# =============================================================================
# NGINX/REVERSE PROXY SETTINGS
# =============================================================================
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# =============================================================================
# CORS SETTINGS - Allowed Origins (comma-separated for multiple origins)
# =============================================================================
# These origins are allowed to make cross-origin requests to the API
CORS_ALLOWED_ORIGINS=http://127.0.0.1:3000,http://localhost:3000

# =============================================================================
# GOOGLE OAUTH SETTINGS (optional)
# =============================================================================
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# =============================================================================
# OAUTH CLIENT SETTINGS
# =============================================================================
OAUTH_CLIENT_NAME=fe_client
OAUTH_CLIENT_REDIRECT_URIS=http://localhost/user/login/google/login/,http://127.0.0.1:3000/callback,http://localhost:3000/callback

# =============================================================================
# SSL/TLS SETTINGS
# =============================================================================
SSL_CERT_PATH=/etc/nginx/ssl/service.crt
SSL_KEY_PATH=/etc/nginx/ssl/service.key

# =============================================================================
# DEBUG SETTINGS
# =============================================================================
GEN3_DEBUG=true
PGSSLMODE=disable
